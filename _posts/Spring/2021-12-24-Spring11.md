---
title: "[스프링] 스프링에서 DB 연결하기"
author: Jinsol
categories: Spring
tags: Spring
date: '2021-12-24'
# image: /assets/img/.png
---

<br>

## <span style="color:#146356">MySQL - DB 생성하기</span>
<hr>

```mysql
create database springtest;
use springtest;

create table springtest(
	num			int 		unique auto_increment,
    uName		char(10)	not null,
    subject	char(30) 	not null,
    content		char(200)	not null,
    date		datetime	default NOW()
);

insert into springtest
(uName, subject, content, date)
values
('리우', '스프링', '스프링어려웡', now()),
('덴버', '자바', '자바도어려웡', now()),
('나이로비', '배고프다', '내일뭐먹지', now());

select * from springtest;
```

![](/assets/img/springdb01.PNG)

<br>
<br>

## <span style="color:#146356">VO 생성하기</span>
<hr>

> - VO (Value Object)
>
> - 도메인 객체의 일종
>
> - read-Only
> 
> - 관계데이터베이스의 레코드에 대응되는 자바클래스

`src/main/java/com` 하위에 'com.springtest.domain' 패키지 생성, TestVO.java라는 이름으로 클래스를 생성했다

```java
package com.springtest.domain;

import java.sql.Date;

public class TestVO {

	private int num;
	private String uName;
	private String subject;
	private String content;
	private Date date;
	
	public int getNum() {
		return num;
	}
	public String getuName() {
		return uName;
	}
	public String getSubject() {
		return subject;
	}
	public String getContent() {
		return content;
	}
	public Date getDate() {
		return date;
	}
}
```

<br>
<br>

## <span style="color:#146356">`pom.xml`</span>
<hr>

- java-version은 1.8로, springframework-version은 4.3.18로 변경하기

![](/assets/img/springdb02.png)

- `<dependencies>` 태그 안에 아래 내용 붙여넣기

```
<!-- mysql -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.26</version>
</dependency>    

<!-- org.mybatis/mybatis -->
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis</artifactId>
    <version>3.4.1</version>
</dependency>

<!-- mybatis-spring -->
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>1.3.0</version>
</dependency>

<!-- spring-jdbc -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>${org.springframework-version}</version>
</dependency>  
```

![](/assets/img/springdb03.png)

<br>
<br>

## <span style="color:#146356">`root-context.xml`</span>
<hr>

- `src/main/webapp/WEB-INF/spring/root-context.xml` 하단 Namespaces

![](/assets/img/springdb04.png)

![](/assets/img/springdb05.png)

위 사진과 동일하게 체크하고 저장해주자

- 다시 Source로 돌아와서 `<beans>` 태그 안에 아래 내용 붙여넣기

```
<!-- MySQL  -->
    <bean class="org.springframework.jdbc.datasource.DriverManagerDataSource" id="dataSource">
    <property name="driverClassName" value="com.mysql.cj.jdbc.Driver"></property>
    <property name="url"
        value="jdbc:mysql://127.0.0.1:3306/test?useSSL=false&amp;serverTimezone=Asia/Seoul"></property>
    <property name="username" value="root"></property>
    <property name="password" value="비밀번호"></property>
    </bean>
<!-- SqlSessionFactory  -->
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
<!-- mybatis 설정파일의 경로 -->
    <property name="configLocation" value="classpath:/mybatis-config.xml" />
<!-- mybatis mapper 파일의 경로 -->
    <property name="mapperLocations" value="classpath:mappers/**/*Mapper.xml" />
    </bean>
    
    <bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate" destroy-method="clearCache">
        <constructor-arg name="sqlSessionFactory" ref="sqlSessionFactory"/>
    </bean>	
```

![](/assets/img/springdb06.png)


<br>
<br>

## <span style="color:#146356">`mybatis-config.xml`</span>
<hr>

`src/main/resources` 하위에 `mybatis-config.xml` 파일 생성하고 아래와 같이 작성하기

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
</configuration>
```