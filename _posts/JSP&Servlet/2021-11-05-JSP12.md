---
title: "[JSP] JSP + JDBC : íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì› íƒˆí‡´ í˜ì´ì§€ ë§Œë“¤ê¸°"
author: Jinsol
categories: JSP/Servlet
tags: JSP/Servlet
date: '2021-11-05'
# image: /assets/img/.png
---

<br>

> [MySQL - Eclipse ì—°ë™í•˜ê¸°](https://velog.io/@losuif/JDBC)

<br>

> ~~í•  ë•Œë§ˆë‹¤ ê¹Œë¨¹ëŠ” JDBC ğŸ˜­ JSPì™€ DBë¥¼ ì—°ë™í•´ì„œ íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì› íƒˆí‡´ + íšŒì› ëª©ë¡ ì¡°íšŒ í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤! ğŸ‘Š~~

<br><br>

### <span style="color:#B2EA70">ë©”ë‰´ ì„ íƒí•˜ê¸°</span>
<hr>

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì¸</title>
    <style>
    	#wrap {
    		padding: 20px;
    		margin: 20px auto;
    		width: 500px;
    		background-color: #EEEEEE;
    		text-align: center;
    	}
    	
    	a {
    		
    		text-decoration: none;
    		font-size: 20px;
    		font-weight: bold;
    		color: #172774;
    		background-color: #EEEEEE;
    		padding: 15px;
    		margin: 10px;
    	}
    	
    	a:hover {
    		color: #EEEEEE;
    		background-color: #172774;
    	}
    </style>
</head>
<body>
	<div id="wrap">
		<a href="Login.jsp">ë¡œê·¸ì¸</a>
		<a href="Join.jsp">íšŒì›ê°€ì…</a>
		<a href="Select.jsp">íšŒì›ëª©ë¡ì¡°íšŒ</a>
	</div>
</body>
</html>
```

<br><br>

### <span style="color:#B2EA70">MySQL DB</span>
<hr>

```sql
create database uMember;
use uMember;

create table member(
    uid		char(10)		primary key,
    upw			char(10)		not null,
    uname		char(10)		not null,
    addr		char(20)		not null,
    phonenum	        char(20)		not null,
    email		char(20)		not null
);

desc member;

select * from member;
```

<br><br>

### <span style="color:#B2EA70">DB ì—°ê²°ì„ ìœ„í•œ Connection</span>
<hr>

- Connection.jsp

    ```jsp
    <%@page import="java.sql.DriverManager"%>
    <%@page import="java.sql.Connection"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DBì—°ê²° Connection</title>
    </head>
    <body>
        <%
            Connection conn = null;

        try {			
                Class.forName("com.mysql.cj.jdbc.Driver");
        
                String url = "jdbc:mysql://localhost:3306/uMember?";
                String id = "root";
                String pw = "1234";
                
                conn = DriverManager.getConnection(url, id, pw);
            
            } catch(ClassNotFoundException e) {
                out.println(e.getMessage());
                    
            } 
            
        %>
    </body>
    </html>
    ```

<br><br>

### <span style="color:#B2EA70">íšŒì›ê°€ì…</span>
<hr>

- Join.jsp

    ```jsp
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì›ê°€ì…</title>
        <style type="text/css">
            h1 {
                margin: 20px auto;
                text-align: center;
            }
            form {
                margin: 0 auto;
                width: 400px;
                padding: 20px;
                border: 1px solid black;
                font-weight: bold;
            }
        </style>
    </head>
    <body>

        <h1>íšŒì›ê°€ì…</h1>

        <form action="Insert.jsp" method="post">
            âœ… ì•„ì´ë”” : <input type="text" name="uid">
            <br><br>
            âœ… ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="upw">
            <br><br>
            âœ… ì´ë¦„ : <input type="text" name="uname">
            <br><br>
            âœ… ì£¼ì†Œ : <input type="text" name="addr">
            <br><br>
            âœ… í•¸ë“œí°ë²ˆí˜¸ : <input type="text" name="phonenum">
            <br><br>
            âœ… ì´ë©”ì¼ : <input type="email" name="email">
            <br><br>
            <input type="submit" value="ê°€ì…í•˜ê¸°">
        </form>

    </body>
    </html>
    ```

- Insert.jsp

    ```jsp
    <%@page import="java.sql.SQLException"%>
    <%@page import="java.sql.PreparedStatement"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê°€ì…ì™„ë£Œ</title>
    </head>
    <body>
        <%@ include file="Connection.jsp" %>
        <%
            request.setCharacterEncoding("UTF-8");
        
            String uid = request.getParameter("uid");
            String upw = request.getParameter("upw");
            String uname = request.getParameter("uname");
            String addr = request.getParameter("addr");
            String phonenum = request.getParameter("phonenum");
            String email = request.getParameter("email");
            
            PreparedStatement pstmt = null;
            
            try {
                String sql = "insert into member values (?, ?, ?, ?, ?, ?)";
                pstmt = conn.prepareStatement(sql);
                pstmt.setString(1, uid);
                pstmt.setString(2, upw);
                pstmt.setString(3, uname);
                pstmt.setString(4, addr);
                pstmt.setString(5, phonenum);
                pstmt.setString(6, email);
                
                int res = pstmt.executeUpdate();
                if (res == 1){
                    out.println("<h1>ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ¤—</h1>");
                    out.println("<a href='Login.jsp'>ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ê°€ê¸°</a>");	    		
                } else {
                    out.println("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                }
            } catch(SQLException e) {
                out.println(e.getMessage());
            } finally {
                if(pstmt != null) pstmt.close();
                if(conn != null) conn.close();
            }
            
        %>
    </body>
    </html>
    ```

    <br>

    ![](/assets/img/jdbc_join.PNG)


<br><br>

### <span style="color:#B2EA70">ë¡œê·¸ì¸</span>
<hr>

- Login.jsp

    ```jsp
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¡œê·¸ì¸</title>
        <style type="text/css">
            h1 {
                margin: 20px auto;
                text-align: center;
            }
            form {
                margin: 0 auto;
                width: 400px;
                padding: 20px;
                border: 1px solid black;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <h1>ë¡œê·¸ì¸</h1>
        
        <form action="LoginChk.jsp" method="post">
            âœ… ì•„ì´ë”” : <input type="text" name="uid">
            <br><br>
            âœ… ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="upw">
            <br><br>
            <input type="submit" value="ë¡œê·¸ì¸">
        </form>
    </body>
    </html>
    ```

- LoginChk.jsp

    ```jsp
    <%@page import="java.sql.SQLException"%>
    <%@page import="java.sql.ResultSet"%>
    <%@page import="java.sql.PreparedStatement"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¡œê·¸ì¸</title>
    </head>
    <body>

        <%@ include file="Connection.jsp" %>
        <%
            request.setCharacterEncoding("UTF-8");
        
            String uid = request.getParameter("uid");
            String upw = request.getParameter("upw");
            
            PreparedStatement pstmt = null;
            ResultSet rs = null;
        
            try {
                
                String sql = "select upw from member where uid = ?";
                pstmt = conn.prepareStatement(sql);
                pstmt.setString(1, uid);
                rs = pstmt.executeQuery();
                
                if (rs.next()){
                    if (rs.getString(1).contentEquals(upw)){
        
                        out.println("<h1>" + uid + "ë‹˜ê»˜ì„œ ë¡œê·¸ì¸ í•˜ì…¨ìŠµë‹ˆë‹¤. ğŸ˜„</h1>");
                        out.println("<a href='Update.jsp'>ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •</a>");
                        out.println("<a href='DeleteForm.jsp'>íšŒì› íƒˆí‡´</a>");
        
                    } else {
                        out.println("<h1>ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. ğŸ¤”</h1>");
                    }
                } else {
                    out.println("<h1>ì•„ì´ë””ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. ğŸ¤”</h1>");
                }
    
            } catch(SQLException e){
                out.println(e.getMessage());
            
            } finally {
                if(pstmt != null) pstmt.close();
                if(rs != null) rs.close();
                if(conn != null) conn.close();
            }
        %>
    </body>
    </html>
    ```

    <br>

    ![](/assets/img/jdbc_login.png)


<br><br>

### <span style="color:#B2EA70">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</span>
<hr>

- Update.jsp

    ```jsp
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì›ì •ë³´ ìˆ˜ì •</title>
        <style type="text/css">
            form {
                margin: 0 auto;
                width: 400px;
                padding: 20px;
                border: 1px solid black;
                font-weight: bold;
            }
        </style>
    </head>
    <body>

        <form action="UpdateInfo.jsp" method="post">
            âœ… ì•„ì´ë”” : <input type="text" name="uid">
            <br><br>
            âœ… ë³€ê²½í•  ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="upw">
            <br><br>
            <input type="submit" value="ìˆ˜ì •í•˜ê¸°">
        </form>

    </body>
    </html>
    ```

- UpdateInfo.jsp

    ```jsp
    <%@page import="java.sql.Statement"%>
    <%@page import="java.sql.SQLException"%>
    <%@page import="java.sql.ResultSet"%>
    <%@page import="java.sql.PreparedStatement"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì› ì •ë³´ ìˆ˜ì •</title>
    </head>
    <body>
        <%@ include file="Connection.jsp" %>
        <%
            request.setCharacterEncoding("UTF-8");
        
            String uid = request.getParameter("uid");
            String upw = request.getParameter("upw");
            
            Statement stmt = null;
            PreparedStatement pstmt = null;
            ResultSet rs = null;
            
            try {
                stmt = conn.createStatement
                        (ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
                
                String sql = "select upw from member where uid = ?";
                pstmt = conn.prepareStatement(sql);
                pstmt.setString(1, uid);
                rs = pstmt.executeQuery();
                
                if(rs.next()) {
                    
                    if(pstmt != null) pstmt.close();

                    String sqlpw = "update member set upw = ? where uid = ?";
                    pstmt = conn.prepareStatement(sqlpw);
                    pstmt.setString(1, upw);
                    pstmt.setString(2, uid);
                    pstmt.executeUpdate();
                    out.println("<h1>" + uid + "ë‹˜ì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ‘</h1>");
                    out.println("<a href='Login.jsp'>ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ê¸°</a>");
                    
                    
                } else {
                    out.println("<h1>ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.</h1>");
                }
                
                
            } catch(SQLException e){
                out.println(e.getMessage());
            
            } finally {
                if(pstmt != null) pstmt.close();
                if(rs != null) rs.close();
                if(stmt != null) stmt.close();
                if(conn != null) conn.close();
            }
        %>
    </body>
    </html>
    ```

    <br>

    ![](/assets/img/jdbc_update.png)


<br><br>

### <span style="color:#B2EA70">íšŒì› íƒˆí‡´</span>
<hr>

- DeleteForm.jsp

    ```jsp
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íƒˆí‡´</title>
        <style>
            div#wrap {
                margin: 0 auto;
                border: 1px solid #000;
                padding: 20px;
                width: 500px;
            }    	
        </style>
    </head>
    <body>
        <div id="wrap">
            <h3>íƒˆí‡´ë¥¼ ìœ„í•´ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”. ğŸ˜¥</h3>
            <form action="Delete.jsp" method="post">
                âœ… ì•„ì´ë”” : <input type="text" name="uid">
                <br><br>
                âœ… ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="upw">
                <br><br>
                <input type="submit" value="íƒˆí‡´í•˜ê¸°">
            </form>
        </div>
    </body>
    </html>
    ```

- Delete.jsp

    ```jsp
    <%@page import="java.sql.ResultSet"%>
    <%@page import="java.sql.PreparedStatement"%>
    <%@page import="java.sql.Statement"%>
    <%@page import="java.sql.SQLException"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì›íƒˆí‡´</title>
    </head>
    <body>
        <%@ include file="Connection.jsp" %>
        <%
            request.setCharacterEncoding("UTF-8");
        
            String uid = request.getParameter("uid");
            String upw = request.getParameter("upw");
            
            Statement stmt = null;
            PreparedStatement pstmt = null;
            ResultSet rs = null;
            
            try {
                stmt = conn.createStatement
                        (ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
                
                String sql = "select upw from member where uid = ?";
                pstmt = conn.prepareStatement(sql);
                pstmt.setString(1, uid);
                rs = pstmt.executeQuery();
                
                if(rs.next()) {
                    
                    if(pstmt != null) pstmt.close();

                    String sqldelete = "delete from member where uid = ? and upw = ?";
                    pstmt = conn.prepareStatement(sqldelete);
                    pstmt.setString(1, uid);
                    pstmt.setString(2, upw);
                    pstmt.executeUpdate();
                    out.println("ì •ìƒì ìœ¼ë¡œ íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                    
                } else {
                    out.println("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
                }
                
                
            } catch(SQLException e){
                out.println(e.getMessage());
            
            } finally {
                if(pstmt != null) pstmt.close();
                if(rs != null) rs.close();
                if(stmt != null) stmt.close();
                if(conn != null) conn.close();
            }
            
            %>
    </body>
    </html>
    ```

    <br>

    ![](/assets/img/jdbc_delete.png)


<br><br>

### <span style="color:#B2EA70">íšŒì› ëª©ë¡ ì¡°íšŒ</span>
<hr>

- Select.jsp

    ```jsp
    <%@page import="java.sql.SQLException"%>
    <%@page import="java.sql.Statement"%>
    <%@page import="java.sql.ResultSet"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì› ì¡°íšŒ</title>
        <style type="text/css">
            table {
                border-collapse: collapse;
            }
            table tr th,
            table tr td{
                width: 100px;
                height: 15px;
                border: 1px solid black;
                padding: 10px;
            }
        </style>
    </head>
    <body>
        <%@ include file="Connection.jsp" %>
        <table>
            <tr>
                <th>ì•„ì´ë””</th>
                <th>ì´ë¦„</th>
                <th>ì£¼ì†Œ</th>
                <th>í•¸ë“œí°ë²ˆí˜¸</th>
                <th>ì´ë©”ì¼</th>
            </tr>
            <%
                ResultSet rs = null;
                Statement stmt = null;
                
                try {
                    
                    stmt = conn.createStatement
                            (ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
                    
                    String sql = "select uid, uname, addr, phonenum, email from member";
                    stmt = conn.createStatement();
                    rs = stmt.executeQuery(sql);
                    
                    while(rs.next()){
                        String uid = rs.getString("uid");
                        String uname = rs.getString("uname");
                        String addr = rs.getString("addr");
                        String phonenum = rs.getString("phonenum");
                        String email = rs.getString("email");
            %>
            <tr>
                <td><%=uid %></td>
                <td><%=uname %></td>
                <td><%=addr %></td>
                <td><%=phonenum %></td>
                <td><%=email %></td>
            </tr>
            <% 
                    }
                    
                } catch(SQLException e){
                    out.println(e.getMessage());
                } finally {
                    rs.close();
                    stmt.close();
                    conn.close();
                }	   	
            %>
        </table>
    </body>
    </html>
    ```

    <br>

    ![](/assets/img/jdbc_select.png)