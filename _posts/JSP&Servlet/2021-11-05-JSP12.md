---
title: "[JSP] JSP + JDBC"
author: Jinsol
categories: JSP/Servlet
tags: JSP/Servlet
date: '2021-11-05'
# image: /assets/img/.png
---

<br>

[MySQL = Eclipse ì—°ë™í•˜ê¸°](https://velog.io/@losuif/JDBC)

- Join.jsp

    ```jsp
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì›ê°€ì…</title>
        <style type="text/css">
            form {
                margin: 0 auto;
                width: 400px;
                padding: 20px;
                border: 1px solid black;
                font-weight: bold;
            }
        </style>
    </head>
    <body>

        <form action="Insert.jsp" method="post">
            âœ… ì•„ì´ë”” : <input type="text" name="uid">
            <br><br>
            âœ… ë¹„ë°€ë²ˆí˜¸ : <input type="password" name="upw">
            <br><br>
            âœ… ì´ë¦„ : <input type="text" name="uname">
            <br><br>
            âœ… ì£¼ì†Œ : <input type="text" name="addr">
            <br><br>
            âœ… í•¸ë“œí°ë²ˆí˜¸ : <input type="text" name="phonenum">
            <br><br>
            âœ… ì´ë©”ì¼ : <input type="email" name="email">
            <br><br>
            <input type="submit" value="ê°€ì…í•˜ê¸°">
        </form>

    </body>
    </html>
    ```

- Connection.jsp

    ```jsp
    <%@page import="java.sql.DriverManager"%>
    <%@page import="java.sql.Connection"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DBì—°ê²° Connection</title>
    </head>
    <body>
        <%
            Connection conn = null;

        try {			
                Class.forName("com.mysql.cj.jdbc.Driver");
        
                String url = "jdbc:mysql://localhost:3306/uMember?";
                String id = "root";
                String pw = "1234";
                
                conn = DriverManager.getConnection(url, id, pw);
            
            } catch(ClassNotFoundException e) {
                out.println(e.getMessage());
                    
            } 
            
        %>
    </body>
    </html>
    ```

- Insert.jsp

    ```jsp
    <%@page import="java.sql.SQLException"%>
    <%@page import="java.sql.PreparedStatement"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê°€ì…ì™„ë£Œ</title>
    </head>
    <body>
        <%@ include file="Connection.jsp" %>
        <%
            request.setCharacterEncoding("UTF-8");
        
            String uid = request.getParameter("uid");
            String upw = request.getParameter("upw");
            String uname = request.getParameter("uname");
            String addr = request.getParameter("addr");
            String phonenum = request.getParameter("phonenum");
            String email = request.getParameter("email");
            
            PreparedStatement pstmt = null;
            
            try {
                String sql = "insert into member values (?, ?, ?, ?, ?, ?)";
                pstmt = conn.prepareStatement(sql);
                pstmt.setString(1, uid);
                pstmt.setString(2, upw);
                pstmt.setString(3, uname);
                pstmt.setString(4, addr);
                pstmt.setString(5, phonenum);
                pstmt.setString(6, email);
                
                int res = pstmt.executeUpdate();
                if (res == 1){
                    out.println("<h1>ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ¤—</h1>");
                } else {
                    out.println("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                }
            } catch(SQLException e) {
                out.println(e.getMessage());
            } finally {
                if(pstmt != null) pstmt.close();
                if(conn != null) conn.close();
            }
            
        %>
    </body>
    </html>
    ```