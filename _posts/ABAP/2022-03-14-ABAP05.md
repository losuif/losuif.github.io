---
title: "[ABAP] OPEN SQL, NATIVE SQL / OPEN SQL 데이터 읽기 - SELECT"
author: Jinsol
categories: SAP ABAP
tags: SAP ABAP
date: '2022-03-14'
# image: /assets/img/.png
---

<br>

## <span style="color:#332FD0">**🌝 OPEN SQL vs. NATIVE SQL**</span>
<hr>

<br>

#### <span style="color:#332FD0">**🌜 OPEN SQL**</span>
<hr>

- ABAP 언어에서만 사용

- Data Interface를 통해 NATIVE SQL(데이터베이스에서 사용되는 SQL 언어)로 번역됨

- DML 언어만 사용 가능

    - DML : Data Manipulation Language (데이터 처리 언어)

    - SELECT, UPDATE, INSERT, DELETE

- Local Buffer를 사용할 수 있음

- ABAP 프로그램을 활성화할 때 자동으로 Syntax Check가 수행됨

<br>

#### <span style="color:#332FD0">**🌜 NATIVE SQL**</span>
<hr>

- 데이터베이스에 직접 접속해 DML, DDL 언어 사용 가능

    - DDL : Data Definition Language (데이터 정의어)
    
    - CREATE, ALTER, DOP, TRUNCATE

- OPEN SQL의 Command Set(SELECT, UPDATE, DELETE, ..)을 사용할 수 있음

<br>

#### <span style="color:#332FD0">**🌜 Local Buffer**</span>
<hr>

![](/assets/img/abapsql.jpg)

- SAP Local Buffer는 R/3 Architecture에서 지원하는 기술로서 데이터베이스의 부하를 줄이는 중요한 역할을 담당

    - Local Buffer란? 각 장치마다 제어하기 위해 설치된 장치 컨트롤러에 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리

- 테이블의 Technical Setting에서 Buffer를 사용한다고 설정해야 함


<br>
<br>

## <span style="color:#332FD0">**🌝 OPEN SQL : 데이터 읽기 - SELECT**</span>
<hr>

<br>

#### <span style="color:#332FD0">**🌜 Single Line**</span>
<hr>

- 데이터베이스에서 하나의 라인 값을 읽어올 때 `SINGLE` 사용

- 하나의 데이터만 가져오기 때문에 WHERE 조건에 유일한 킷값이 추가되어야 하는데, WHERE 구문이 잘못 되어 여러 개의 라인을 읽어온다면 임의의 라인을 반환

<br>

#### <span style="color:#332FD0">**🌜 Several Line**</span>
<hr>

- 여러 라인을 조회할 때는 SELECT 결과가 내부 테이블에 저장되는데, ABAP에서는 이것을 **인터널 테이블(Internal Table)**이라 부른다.

- `INTO` 구문의 결과가 저장되는 곳이 인터널 테이블이 아닌 필드 또는 Work Area일 때에는 마지막에 `ENDSELECT`를 사용해야 함 -> 하나의 값을 읽어서 구조에 삽입, 조건에 해당하는 값을 모두 읽어 올 떄까지 LOOP를 수행

    - `INTO` : SELECT에서 읽어온 데이터를 변수에 저장, 이 변수를 ABAP 프로그램에서 사용

```
REPORT TEST.

DATA : GT_ITAB TYPE STANDARD TABLE OF SFLIGHT,
    GS_WA TYPE SFLIGHT.

SELECT * INTO TABLE GT_ITAB
    FROM SFLIGHT
    WHERE CARRID EQ 'AA'.

LOOP AT GT_ITAB INTO GS_WA.
    WRITE : /GS_WA-CARRID, GS_WA-CONNID.
ENDLOOP.
```