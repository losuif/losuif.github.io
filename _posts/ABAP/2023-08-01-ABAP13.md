---
title: "[ABAP] NATIVE SQL"
author: Jinsol
categories: SAP/ABAP
tags: SAP/ABAP
date: '2023-08-01'
# image: /assets/img/.png
---

<br>

ğŸ‘ OPEN SQLë§Œìœ¼ë¡œëŠ” ì›í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì“¸ ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ìˆëŠ”ë°, **NATIVE SQLì„ ì‚¬ìš©í•´ SELECT** í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì„ ì•Œì•„ë³´ì. ğŸ‘

<br>

```ABAP
TYPES: BEGIN OF gty_s_test,
    f1 TYPE ~,
    f2 TYPE ~,
    ...      ,
    END OF gty_s_test,
    gty_t_test TYPE TABLE OF gty_s_test.

DATA: gt_test   TYPE TABLE OF gty_s_test WITH HEADER LINE.
"or
DATA: gt_test   TYPE gty_t_test WITH HEADER LINE.

DATA: gt_test2  TYPE TABLE OF gty_s_test.
```

SELECT í•  í•„ë“œë¥¼ TYPESë¬¸ìœ¼ë¡œ ì„ ì–¸í•˜ê³  í…Œì´ë¸”ë„ ë§Œë“¤ì–´ì£¼ê¸°.

<br>
<br>

## <span style="color:#A084E8">**ğŸŒ EXEC SQL PERFORMING ...**</span>
<hr>

ì²« ë²ˆì§¸ ë°©ë²•ì€ PERFORM êµ¬ë¬¸ìœ¼ë¡œ Subroutineì„ í˜¸ì¶œí•´ FORM êµ¬ë¬¸ì„ ìˆ˜í–‰í•˜ë“¯ì´ PERFORMING/FORM êµ¬ë¬¸ ì‚¬ìš©í•˜ê¸°.

```ABAP
EXEC SQL PERFORMING append_data.
    SELECT 
        f1, f2, ...
    INTO :gt_test
    FROM ...
ENDEXEC.

FORM append_data.
    APPEND gt_test.
    CLEAR gt_test.
ENDFORM.
```

í…Œì´ë¸”ì— ë°”ë¡œ ë„£ì„ ìˆ˜ë„ ìˆê³ ,
<br>

```ABAP
EXEC SQL PERFORMING append_data.
    SELECT 
        f1, f2, ...
    INTO :gs_test
    FROM ...
ENDEXEC.

FORM append_data.
    APPEND gs_test TO gt_test.
    CLEAR gs_test.
ENDFORM.
```

ìŠ¤íŠ¸ëŸ­ì³ì— ë„£ê³  í…Œì´ë¸”ì— append í•  ìˆ˜ë„ ìˆë‹¤.

<br>
<br>

## <span style="color:#A084E8">**ğŸŒ EXEC SQL. OPEN dbcur FOR ...**</span>
<hr>

```ABAP
DATA: ls_test TYPE gty_s_test.

EXEC SQL.
    OPEN dbcur FOR
    SELECT
        f1, f2, ...
    FROM ...
END EXEC.

DO.
    EXEC SQL.
        FETCH NEXT dbcur INTO   :ls_test-f1,
                                :ls_test-f2,
                                ...
    END EXEC.

    IF sy-subrc EQ 0.
        APPEND ls_test TO gt_test2.
        CLEAR ls_test.
    ELSE.
        EXIT.
    ENDIF.
ENDDO.

EXEC SQL.
    CLOSE dbcur
ENDEXEC.
```

ì´ê±´ ì´ë²ˆì— ì²˜ìŒ ì•Œê²Œ ëœ ë°©ë²•. dbcurì´ë¼ëŠ” database cursurë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë¥¼ ì½ê³ , ì„±ê³µ ì‹œ append.

<br>
ğŸ’¥ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ NATIVE SQL ì•ˆì—ì„œ ì‚¬ìš©í•  ë•ŒëŠ” ë³€ìˆ˜ ì•ì— " : " ë„£ì–´ì£¼ê¸°!!
<br>
ğŸ’¥ BETWEEN ë“± ì‚¬ìš© ì‹œ ë”°ì˜´í‘œ ì—†ì´ &nbsp;&nbsp; :ë³€ìˆ˜ëª… &nbsp;&nbsp; ìœ¼ë¡œë§Œ ì“°ê¸°!! ("" ì¼ë‹¤ê°€ ì™œì•ˆë˜ì§€ nì‹œê°„ í•¨ã…‹)