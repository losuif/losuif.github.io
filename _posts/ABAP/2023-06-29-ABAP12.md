---
title: "[ABAP] AT FIRST / AT LAST / AT NEW / AT END OF / ON CHANGE OF"
author: Jinsol
categories: SAP/ABAP
tags: SAP/ABAP
date: '2023-06-29'
# image: /assets/img/.png
---

<br>

|COL1(1) TYPE C|COL2(3) TYPE C|COL3 TYPE I|COL4(3) TYPE C|
|:--:|:--:|:--:|:--:|
|A|001|10|aaa|
|A|001|30|aaa|
|A|001|20|aab|
|B|002|0|bbb|
|B|002|50|bbb|
|A|002|50|aaa|

ìœ„ì™€ ê°™ì€ ì¸í„°ë„í…Œì´ë¸” lt_tab, ìŠ¤íŠ¸ëŸ­ì³ ls_tab ì„ ë§Œë“¤ì—ˆë‹¤ê³  í•  ë•Œ,

<br><br>

## <span style="color:#4FC0D0">**ğŸŒ AT FIRST / AT LAST**</span>
<hr>

<br>

ğŸŒœ **AT FIRST**ëŠ” LOOPì˜ ë§¨ ì²˜ìŒ í•œ ë²ˆë§Œ, **AT LAST**ëŠ” LOOPì˜ ë§¨ ë§ˆì§€ë§‰ í•œ ë²ˆë§Œ ì‹¤í–‰
<br>

```abap
LOOP AT lt_tab INTO ls_tab.
    AT FIRST.
        WRITE:  / 'AT FIRST'.
    ENDAT.

    WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.

    AT LAST.
        WRITE: / 'AT LAST'.
    ENDAT.
ENDLOOP.
```

ê²°ê³¼)

```
AT FIRST
A   001  10  aaa
A   001  30  aaa
A   001  20  aab
B   002  0   bbb
B   002  50  bbb
A   002  50  aaa
AT LAST
```

<br><br>

## <span style="color:#4FC0D0">**ğŸŒ AT NEW / AT END OF**</span>
<hr>

<br>

ğŸŒœ **AT NEW**ëŠ” í•´ë‹¹ í•„ë“œ í¬í•¨ ì• í•„ë“œì˜ ê°’ì´ ë³€ê²½ë  ë•Œ, **AT END OF**ëŠ” í•´ë‹¹ í•„ë“œ í¬í•¨ ì• í•„ë“œì˜ ê°’ì´ ë³€ê²½ë˜ê¸° ì „ ë§ˆì§€ë§‰ ë°ì´í„°ì—ì„œ ì‹¤í–‰
<br>
ğŸŒœ SORT ê²°ê³¼ì— ë”°ë¼ ê°’ì´ ë‹¬ë¼ì§
<br>
ğŸŒœ SORT í•œ ì´í›„ì˜ í•„ë“œëŠ” ì›ë˜ ê°’ì— ê´€ê³„ì—†ì´ ë¬¸ìëŠ” ê¸¸ì´ë§Œí¼ *ë¡œ, ìˆ«ìëŠ” 0ìœ¼ë¡œ ì±„ì›Œì§
<br>
<br>

â–¶ lt_tabì„ col1ë¡œ SORT

```
A   001  10  aaa
A   001  30  aaa
A   001  20  aab
A   002  50  aaa
B   002  0   bbb
B   002  50  bbb
```

- AT NEW (í•œ ê°œì˜ í•„ë“œë¡œ SORT)

    ```abap
    SORT lt_tab BY col1.

    LOOP AT lt_tab INTO ls_tab.
        AT NEW col1.
            WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.
        ENDAT.
    ENDLOOP.
    ```

    ê²°ê³¼)

    ```
    A   ***  0  ***
    B   ***  0  ***
    ```

- AT END OF (í•œ ê°œì˜ í•„ë“œë¡œ SORT)
  
    ```abap
    SORT lt_tab BY col1.

    LOOP AT lt_tab INTO ls_tab.
        AT END OF col1.
            WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.
        ENDAT.
    ENDLOOP.
    ```

    ê²°ê³¼)

    ```
    A   ***  0  ***
    B   ***  0  ***
    ```

<br>

â–¶ lt_tabì„ col1 col2ë¡œ SORT

```
A   001  10  aaa
A   001  30  aaa
A   001  20  aab
A   002  50  aaa
B   002  0   bbb
B   002  50  bbb
```

- AT NEW (ë‘ ê°œì˜ í•„ë“œë¡œ SORT)

    ```abap
    SORT lt_tab BY col1 col2.

    LOOP AT lt_tab INTO ls_tab.
        AT NEW col2.
            WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.
        ENDAT.
    ENDLOOP.
    ```

    ê²°ê³¼)

    ```
    A   001  0  ***
    A   002  0  ***
    B   002  0  ***
    ```

- AT END OF (ë‘ ê°œì˜ í•„ë“œë¡œ SORT)

    ```abap
    SORT lt_tab BY col1 col2.

    LOOP AT lt_tab INTO ls_tab.
        AT END OF col2.
            WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.
        ENDAT.
    ENDLOOP.
    ```

    ê²°ê³¼)

    ```
    A   001  0  ***
    A   002  0  ***
    B   002  0  ***
    ```

<br><br>

## <span style="color:#4FC0D0">**ğŸŒ ON CHANGE OF**</span>
<hr>

<br>
ğŸŒœ ON CHANGE OFëŠ” AT NEW/AT ENDì™€ëŠ” ë‹¤ë¥´ê²Œ í•´ë‹¹ í•„ë“œ ì´í›„ ëª¨ë“  í•„ë“œì˜ ê°’ì´ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë¨
<br>
<br>

- í•œ ê°œì˜ í•„ë“œë¡œ SORT

    ```abap
    SORT lt_tab BY col1.

    LOOP AT lt_tab INTO ls_tab.
        ON CHANGE OF ls_tab-col1.
            WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.
        ENDON.
    ENDLOOP.
    ```

    ê²°ê³¼)

    ```
    A   001  10  aaa
    B   002   0  bbb
    ```

- ë‘ ê°œì˜ í•„ë“œë¡œ SORT

    ```abap
    SORT lt_tab BY col1 col2.

    LOOP AT lt_tab INTO ls_tab.
        ON CHANGE OF ls_tab-col2.
            WRITE: / ls_tab-col1, ls_tab-col2, ls_tab-col3, ls_tab-col4.
        ENDAT.
    ENDLOOP.
    ```

    ê²°ê³¼)

    ```
    A   001  10  aaa
    A   002  50  aaa
    ```