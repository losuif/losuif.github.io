---
title: "[ABAP] OPEN SQL ë°ì´í„° ë³€ê²½ - INSERT, MODIFY"
author: Jinsol
categories: SAP/ABAP
tags: SAP/ABAP
date: '2022-03-16'
# image: /assets/img/.png
---

<br>

## <span style="color:#603601">**ğŸŒ OPEN SQL : ë°ì´í„° ë³€ê²½ - INSERT**</span>
<hr>

<br>

#### <span style="color:#603601">**ğŸŒœ Single line**</span>
<hr>

- í…Œì´ë¸”ì— í•˜ë‚˜ì˜ lineì„ ì‚½ì…í•˜ê¸° ìœ„í•œ ë¬¸ì¥

-   ```
    INSERT INTO <target> VALUES <wa>.
    INSERT <target> FROM <wa>.
    INSERT <dbtab>. 
    ```

    - `<wa>`ëŠ” í…Œì´ë¸”ê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ì„ ì–¸ë˜ì–´ì•¼ í•¨

    - `INSERT <dbtab>` êµ¬ë¬¸ì„ ì“°ê¸° ìœ„í•´ì„œëŠ” `TABLES : <dbtab>`ì´ ì„ ì–¸ë˜ì–´ì•¼ í•¨

    - ìœ„ ë‘ ë‚´ìš©ì€ UPDATE, DELETE, MODIFYì—ë„ ë™ì¼í•˜ê²Œ ì ìš©
    
<br>

#### <span style="color:#603601">**ğŸŒœ Several line**</span>
<hr>

- ì¸í„°ë„ í…Œì´ë¸”ì˜ ëª¨ë“  ê°’ì„ í…Œì´ë¸”ì— í•œ ë²ˆì— ì‚½ì…

- ê°™ì€ KEY ê°’ì„ INSERT í•˜ë©´ dump errorê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ `ACCEPTING DUPLICATE KEYS` êµ¬ë¬¸ ì‚¬ìš©

- INSERT êµ¬ë¬¸ ì‹¤íŒ¨ ì‹œ SY-SUBRC ê°’ 4 ë°˜í™˜

- ex)

    ```
    REPORT ZTEST.

    DATA : gt_spfli TYPE TABLE OF spfli,
        gs_spfli TYPE spfli.

    gs_spfli-carrid = 'KO'.
    gs_spfli-connid = '0001'.
    gs_spfli-cityfrom = 'SEOUL'.
    gs_spfli-cityto = 'PARIS'.
    APPEND gs_spfli TO gt_spfli.

    gs_spfli-carrid = 'KO'.
    gs_spfli-connid = '0002'.
    gs_spfli-cityfrom = 'SEOUL'.
    gs_spfli-cityto = 'NICE'.
    APPEND gs_spfli TO gt_spfli.

    INSERT spfli FROM TABLE gt_spfli ACCEPTING DUPLICATE KEYS.
    ```
<br>

- ğŸ’¡ `APPEND` ë³´ë‹¤ëŠ” `INSERT INTO TABLE`ì„ ì‚¬ìš©í•˜ì!

    - `APPEND`

        - ì¸í„°ë„ í…Œì´ë¸”ì˜ ë§ˆì§€ë§‰ ìœ„ì¹˜ì— ì¶”ê°€

        - Indexë§Œ ì´ìš©í•´ ì¶”ê°€í•˜ê¸° ë•Œë¬¸ì— Hashed Typeì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€

    - `INSERT INTO`
    
        - Standard Table, Sorted Table, Hashed Tableì—ì„œ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥

        - Keyì™€ Indexë¥¼ ì´ìš©í•´ ì›í•˜ëŠ” ìœ„ì¹˜ì— ì¶”ê°€ ê°€ëŠ¥

<br> 
<br> 

## <span style="color:#603601">**ğŸŒ OPEN SQL : ë°ì´í„° ë³€ê²½ - MODIFY**</span>
<hr>

- MODIFYëŠ” UPDATEì™€ INSERTë¥¼ í•©í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰

-   - í‚·ê°’ì„ ê°€ì§€ëŠ” ë°ì´í„°ê°€ í…Œì´ë¸”ì— ì¡´ì¬í•œë‹¤ë©´ UPDATE

    - ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ INSERT

- ex)

    ```
    REPORT ZTEST.

    DATA : gt_spfli TYPE TABLE OF spfli,
        gs_spfli TYPE spfli.
    * spfli í…Œì´ë¸”ì˜ í‚·ê°’ì€ carrid, connid

    gs_spfli-carrid = 'KO'.
    gs_spfli-connid = '0001'.
    gs_spfli-cityfrom = 'KOREA'.
    MODIFY spfli FROM gs_spfli.

    gs_spfli-carrid = 'KO'.
    gs_spfli-connid = '0001'.
    gs_spfli-cityfrom = 'SEOUL'.
    APPEND gs_spfli TO gt_spfli.

    gs_spfli-carrid = 'KO'.
    gs_spfli-connid = '0003'.
    gs_spfli-cityfrom = 'BUSAN'.
    APPEND gs_spfli TO gt_spfli.
    
    MODIFY spfli FROM gt_spfli.
    ```